# Maintainer: Chris Warrick <chris@chriswarrick.com>
# Contributor: Jan "heftig" Steffens <jan.steffens@gmail.com>
# Contributor: Corrado Primier <bardo@aur.archlinux.org>
# Contributor: William Rea <sillywilly@gmail.com>
# Contributor: Daniel J Griffiths <ghost1227@archlinux.us>
pkgname=pavumeter
pkgver=0.9.3
pkgrel=4
pkgdesc="A simple GTK volume meter for the PulseAudio sound server"
arch=(i686 x86_64)
url="http://git.0pointer.de/pavumeter.git"
license=(GPL)
depends=(gtkmm pulseaudio gnome-icon-theme libsigc++)
groups=(pulseaudio-gnome)
source=(git://git.0pointer.net/pavumeter.git
        README.patch
        pavumeter.desktop
        pavumeter-record.desktop)
md5sums=('SKIP'
         '31d5415b5929e666920e58e9d71005a3'
         'ead0c02a2af5fcf4acc381da39b836df'
         '2d784d472cd22dfc5320c30112e1e59d')

build() {
  cd ${srcdir}/${pkgname}
  git apply ../README.patch
  ./autogen.sh
  ./configure --prefix=/usr --disable-lynx
  make || return 1
}

package() {
  cd ${srcdir}/${pkgname}
  make DESTDIR=${pkgdir} install

  install -Dm644 ${srcdir}/pavumeter.desktop \
    ${pkgdir}/usr/share/applications/pavumeter.desktop
  install -Dm644 ${srcdir}/pavumeter-record.desktop \
    ${pkgdir}/usr/share/applications/pavumeter-record.desktop
}
